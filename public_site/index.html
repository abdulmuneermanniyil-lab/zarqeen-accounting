<!-- Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„Ù‘ÙŽÙ‡Ù Ù±Ù„Ø±Ù‘ÙŽØ­Ù’Ù…ÙŽÙ€Ù°Ù†Ù Ù±Ù„Ø±Ù‘ÙŽØ­ÙÙŠÙ…Ù 

In the Name of Allahâ€”the Most Compassionate, Most Merciful.
 -->
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Zarqeen Alif - India's Best Value Invoicing Software</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Razorpay SDK -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="static/header.png">

    <style>
        /* (Keep your existing CSS exactly as it was) */
        :root {
            --primary: #2563EB;
            --primary-dark: #1E40AF;
            --accent: #F59E0B;
            --bg-light: #F3F4F6;
            --text-main: #111827;
            --text-muted: #6B7280;
            --white: #ffffff;
            --success: #10B981;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        body { background-color: var(--bg-light); color: var(--text-main); line-height: 1.6; }
        a { text-decoration: none; }
        ul { list-style: none; }
        header { background: var(--white); box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; }
        .logo-area { display: flex; align-items: center; gap: 12px; }
        .logo-img { height: 45px; width: auto; }
        .brand-name { font-weight: 800; font-size: 1.35rem; color: var(--primary-dark); tracking: -0.5px; }
        .nav-links { display: flex; align-items: center; gap: 2rem; }
        .nav-links a { color: var(--text-muted); font-weight: 600; font-size: 0.95rem; transition: color 0.2s; }
        .nav-links a:hover { color: var(--primary); }
        .nav-btn { background: var(--primary); color: var(--white) !important; padding: 0.6rem 1.2rem; border-radius: 8px; transition: background 0.2s; }
        .nav-btn:hover { background: var(--primary-dark); }
        .hero { text-align: center; padding: 5rem 1rem 4rem; background: linear-gradient(180deg, #FFFFFF 0%, #EFF6FF 100%); border-bottom: 1px solid #DBEAFE; }
        .tagline { display: inline-block; background: #DBEAFE; color: var(--primary-dark); padding: 6px 16px; border-radius: 50px; font-size: 0.85rem; font-weight: 700; margin-bottom: 1.5rem; border: 1px solid #BFDBFE; }
        .hero h1 { font-size: 3rem; font-weight: 800; color: #111827; line-height: 1.2; margin-bottom: 1.5rem; letter-spacing: -1px; }
        .hero h1 span { color: var(--primary); }
        .hero p { font-size: 1.2rem; color: var(--text-muted); max-width: 700px; margin: 0 auto 2.5rem; }
        .cta-group { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .btn-lg { padding: 1rem 2rem; font-size: 1.1rem; border-radius: 8px; font-weight: 600; cursor: pointer; border: none; transition: transform 0.2s; }
        .btn-lg:hover { transform: translateY(-2px); }
        .btn-primary { background: var(--primary); color: var(--white); }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-outline { background: var(--white); color: var(--text-main); border: 1px solid #D1D5DB; }
        .btn-outline:hover { border-color: var(--text-main); background: #F9FAFB; }
        .specs { font-size: 0.85rem; color: var(--text-muted); margin-top: 1.5rem; opacity: 0.8; }
        .features { max-width: 1200px; margin: -3rem auto 3rem; padding: 0 1.5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; position: relative; z-index: 10; }
        .feature-card { background: var(--white); padding: 2rem; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05); border: 1px solid #E5E7EB; transition: transform 0.2s; }
        .feature-card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .icon-box { font-size: 2rem; margin-bottom: 1rem; background: #EFF6FF; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 12px; }
        .feature-card h3 { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; color: #1F2937; }
        .feature-card p { color: var(--text-muted); font-size: 0.95rem; }
        .pricing-section { padding: 4rem 1rem; text-align: center; }
        .section-title { font-size: 2.25rem; font-weight: 800; margin-bottom: 0.5rem; }
        .section-subtitle { color: var(--text-muted); margin-bottom: 3rem; font-size: 1.1rem; }
        .pricing-grid { max-width: 1000px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; align-items: start; }
        .plan-card { background: var(--white); padding: 2.5rem; border-radius: 16px; border: 1px solid #E5E7EB; position: relative; display: flex; flex-direction: column; height: 100%; transition: 0.3s; }
        .plan-card.popular { border: 2px solid var(--primary); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); transform: scale(1.05); z-index: 2; }
        .badge { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--accent); color: #78350F; padding: 6px 16px; border-radius: 20px; font-size: 0.8rem; font-weight: 800; letter-spacing: 0.5px; text-transform: uppercase; }
        .plan-name { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; color: #1F2937; }
        .price { font-size: 3rem; font-weight: 800; color: #111827; }
        .price span { font-size: 1rem; color: var(--text-muted); font-weight: 500; }
        .plan-desc { color: var(--text-muted); margin-bottom: 2rem; font-size: 0.95rem; border-bottom: 1px solid #E5E7EB; padding-bottom: 1.5rem; }
        .features-list { list-style: none; text-align: left; margin-bottom: 2rem; }
        .features-list li { margin-bottom: 0.8rem; color: #374151; display: flex; align-items: center; gap: 10px; font-size: 0.95rem; }
        .features-list li::before { content: "âœ“"; color: var(--success); font-weight: 800; }
        .btn-buy { width: 100%; padding: 1rem; border-radius: 8px; font-weight: 700; font-size: 1rem; cursor: pointer; border: none; transition: 0.2s; margin-top: auto; }
        .btn-buy.primary { background: var(--primary); color: var(--white); box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.2); }
        .btn-buy.primary:hover { background: var(--primary-dark); box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3); }
        .btn-buy.secondary { background: #E5E7EB; color: #374151; }
        .btn-buy.secondary:hover { background: #D1D5DB; }
        footer { margin-top: 4rem; padding: 3rem 1rem; background: var(--white); border-top: 1px solid #E5E7EB; text-align: center; }
        .footer-admin { margin-top: 20px; font-size: 0.8rem; color: #9CA3AF; }
        .footer-admin a { color: inherit; }
        .modal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); backdrop-filter: blur(4px); animation: fadeIn 0.2s; }
        .modal-content { background-color: var(--white); margin: 15vh auto; padding: 2.5rem; border-radius: 12px; width: 90%; max-width: 450px; text-align: center; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); position: relative; }
        .key-box { background: #F3F4F6; padding: 1rem; border: 2px dashed #D1D5DB; border-radius: 8px; margin: 1.5rem 0; font-family: monospace; font-size: 1.1rem; color: var(--primary-dark); word-break: break-all; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .hero h1 { font-size: 2.25rem; }
            .plan-card.popular { transform: none; }
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <header>
        <div class="nav-container">
            <div class="logo-area">
                <img src="static/logo.png" alt="Zarqeen" class="logo-img">
                <span class="brand-name">Zarqeen Alif</span>
            </div>
            <nav class="nav-links">
                <a href="#features">Features</a>
                <a href="#pricing">Pricing</a>
                <a href="https://drive.google.com/drive/folders/17O3vY4KYUzd7Rma4o8rp3j2iIrpqhJe9?usp=drive_link" target="_blank" class="nav-btn">Download for Windows</a>
            </nav>
        </div>
    </header>

    <!-- HERO SECTION -->
    <section class="hero">
        <div class="tagline">
    <img src="https://flagcdn.com/w40/in.png" alt="India Flag" style="height: 14px; vertical-align: middle; margin-right: 5px;"> 
    MADE FOR INDIA
</div>
        <h1>
            India's Best Value <br>
            <span>Invoicing Software</span>
        </h1>
        <p>
            The easiest offline billing software. Automatically calculates taxes. 
            Designed specifically for Indian businesses who want simplicity and speed.
        </p>
        
        <div class="cta-group">
            <a href="https://drive.google.com/drive/folders/17O3vY4KYUzd7Rma4o8rp3j2iIrpqhJe9?usp=drive_link" target="_blank">
                <button class="btn-lg btn-primary">Download Free Trial</button>
            </a>
            <a href="#pricing">
                <button class="btn-lg btn-outline">See Best Prices</button>
            </a>
        </div>
        
        <div class="specs">
            v1.2.0 â€¢ Windows 10/11 â€¢ 200MB â€¢ No Internet Required
        </div>
    </section>

    <!-- FEATURES SECTION -->
    <section id="features" class="features">
        <div class="feature-card">
            <div class="icon-box">âš¡</div>
            <h3>Lightning Fast & Offline</h3>
            <p>Generates bills in seconds. Works 100% offline so your data stays safe on your own computer. No cloud fees.</p>
        </div>
        <div class="feature-card">
            <div class="icon-box">ðŸ“Š</div>
            <h3>Auto Tax Calculation</h3>
            <p>Not GST-filing ready, but smart enough to automatically calculate SGST, CGST, and IGST based on your state settings.</p>
        </div>
        <!-- Feature 3 -->
<div class="feature-card">
    <div class="icon-box">
        <img src="https://flagcdn.com/w80/in.png" alt="India Flag" style="width: 35px; height: auto;">
    </div>
    <h3>Exclusively for India</h3>
    <p>Built specifically for the Indian market. Pre-loaded with Indian State codes and currency formats.</p>
</div>
    </section>

    <!-- PRICING SECTION -->
    <section id="pricing" class="pricing-section">
        <h2 class="section-title">Unbeatable Pricing</h2>
        <p class="section-subtitle">The cheapest and most reliable software in India.</p>

        <div class="pricing-grid">
            
            <!-- Free Plan -->
            <div class="plan-card">
                <div class="plan-header">
                    <div class="plan-name">Trial</div>
                    <div class="price">Free</div>
                    <p class="plan-desc">7 Days unlimited access</p>
                </div>
                <ul class="features-list">
                    <li>1000 Invoices</li>
                    <li>Single user only</li>
                    <li>All other premium features</li>
                    <li>No Credit Card required</li>
                </ul>
                <a href="https://drive.google.com/drive/folders/17O3vY4KYUzd7Rma4o8rp3j2iIrpqhJe9?usp=drive_link" target="_blank" style="margin-top: auto;">
                    <button class="btn-buy secondary">Download Now</button>
                </a>
            </div>

            <!-- Basic Plan -->
            <div class="plan-card">
                <div class="plan-header">
                    <div class="plan-name">Basic</div>
                    <div class="price">â‚¹299<span>/year</span></div>
                    <p class="plan-desc">Ideal for new customers</p>
                </div>
                <ul class="features-list">
                    <li>Valid for 1 Year</li>
                    <li>2 Staff Accounts</li>
                    <li>Automatic Tax Calc</li>
                    <li>Email Support</li>
                </ul>
                <button class="btn-buy primary" onclick="buyPlan('basic')">Buy Basic License</button>
            </div>

            <!-- Premium Plan -->
            <div class="plan-card popular">
                <div class="badge">BEST VALUE</div>
                <div class="plan-header">
                    <div class="plan-name">Premium</div>
                    <div class="price">â‚¹599<span>/3 years</span></div>
                    <p class="plan-desc">For smart business owners</p>
                </div>
                <ul class="features-list">
                    <li><strong>Valid for 3 Years</strong></li>
                    <li>Unlimited Staff</li>
                    <li>Priority Support</li>
                    <li>Free Updates</li>
                    <li>Automatic Tax Calc</li>
                </ul>
                <button class="btn-buy primary" onclick="buyPlan('premium')">Buy Premium License</button>
            </div>

        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <p>&copy; <span id="year"></span> Zarqeen Accounting Solutions.</p>
        <p style="margin-top:10px; font-size: 0.9rem;">
            Support: <a href="mailto:zarqeensoftware@gmail.com" style="color:var(--primary); font-weight:600;">zarqeensoftware@gmail.com</a>
        </p>
        <div class="footer-admin">
            <!-- IMPORTANT: Point this to your backend URL -->
            <!-- Replace the URL below with your actual Backend Service URL -->
<a href="https://zarqeen-backend.onrender.com/admin/login">Admin Login</a>
        </div>
    </footer>

    <!-- SUCCESS MODAL -->
    <div id="licenseModal" class="modal">
        <div class="modal-content">
            <div style="font-size: 3.5rem; margin-bottom: 10px;">ðŸŽ‰</div>
            <h2 style="color: #059669; font-weight: 800;">Payment Successful!</h2>
            <p style="color: var(--text-muted); margin-top: 10px;">Here is your license file. Download and upload it inside the software.</p>
            
            <div id="licenseKeyArea" class="key-box">Generating...</div>
            
            <button class="btn-buy secondary" onclick="closeLicenseModal()">Close</button>
        </div>
    </div>

    <!-- LOGIC -->
    <!-- LOGIC -->
    <script>
        // 1. GLOBAL VARIABLES (Must be at the top)
        document.getElementById('year').textContent = new Date().getFullYear();
        let RAZORPAY_KEY_ID = null; 

        // âš ï¸ REPLACE THIS with your actual Backend URL from Render
        // Example: "https://zarqeen-backend.onrender.com"
        const BACKEND_URL = "https://zarqeen-backend.onrender.com"; 

        // Update Admin Link automatically
        const adminLink = document.getElementById('adminLink');
        if(adminLink) {
            adminLink.href = `${BACKEND_URL}/admin/login`;
        }

        // 2. Fetch Configuration on Page Load
        async function fetchConfig() {
            try {
                const res = await fetch(`${BACKEND_URL}/api/get-config`);
                const data = await res.json();
                
                // Update the global variable
                RAZORPAY_KEY_ID = data.key_id; 
                console.log("System Ready. Key loaded.");
            } catch (error) {
                console.error("Error connecting to backend:", error);
            }
        }
        
        // Run immediately
        fetchConfig();

        // 3. UI Functions
        function closeLicenseModal() {
            document.getElementById('licenseModal').style.display = 'none';
            window.location.reload(); 
        }

        function resetUI() {
            document.body.style.cursor = 'default';
            const btns = document.querySelectorAll('button');
            btns.forEach(b => b.disabled = false);
        }

        // 4. Buy Logic
        async function buyPlan(planType) {
            // Check if key is loaded
            if (!RAZORPAY_KEY_ID) {
                alert("Connecting to server... please wait 2 seconds and try again.");
                await fetchConfig(); // Try fetching again
                return;
            }

            // Visual feedback
            document.body.style.cursor = 'wait';
            const btns = document.querySelectorAll('button');
            btns.forEach(b => b.disabled = true);

            try {
                // A. Create Order via Backend
                const res = await fetch(`${BACKEND_URL}/create_order`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ plan: planType })
                });
                
                if (!res.ok) {
                    throw new Error(`Server error: ${res.status}`);
                }

                const orderData = await res.json();

                if(orderData.error) { 
                    throw new Error(orderData.error);
                }

                // B. Open Razorpay
                const options = {
                    "key": RAZORPAY_KEY_ID, // Uses the global variable
                    "amount": orderData.amount,
                    "currency": "INR",
                    "name": "Zarqeen Alif",
                    "description": `License: ${planType.toUpperCase()}`,
                    "order_id": orderData.id,
                    "theme": { "color": "#2563EB" }, 
                    "handler": async function (response){
                        // C. Verify Payment via Backend
                        try {
                            const verifyRes = await fetch(`${BACKEND_URL}/verify_payment`, {
                                method: 'POST',
                                headers: {'Content-Type': 'application/json'},
                                body: JSON.stringify({
                                    razorpay_payment_id: response.razorpay_payment_id,
                                    razorpay_order_id: response.razorpay_order_id,
                                    razorpay_signature: response.razorpay_signature,
                                    plan_type: planType
                                })
                            });
                            const result = await verifyRes.json();
                            
                            if(result.success) {
                                // D. Download Logic
                                const licenseKey = result.license_key;
                                const blob = new Blob([licenseKey], { type: "text/plain" });
                                const url = window.URL.createObjectURL(blob);
                                
                                const keyArea = document.getElementById('licenseKeyArea');
                                keyArea.innerHTML = ""; 
                                
                                const downloadBtn = document.createElement("a");
                                downloadBtn.href = url;
                                downloadBtn.download = "license.zarqeen"; 
                                downloadBtn.className = "btn-buy primary";
                                downloadBtn.style.display = "inline-block";
                                downloadBtn.style.textDecoration = "none";
                                downloadBtn.innerText = "â¬‡ Download License File";
                                
                                keyArea.appendChild(downloadBtn);
                                
                                document.getElementById('licenseModal').style.display = 'block';
                            } else {
                                alert('Verification failed. Please contact support.');
                            }
                        } catch (e) {
                            console.error(e);
                            alert("Verification error. Check internet.");
                        } finally {
                            resetUI();
                        }
                    },
                    "modal": {
                        "ondismiss": function(){ resetUI(); }
                    }
                };
                
                const rzp1 = new Razorpay(options);
                rzp1.open();

            } catch(e) {
                console.error(e);
                alert("Error: " + e.message);
                resetUI();
            }
        }
    </script>
</body>
</html>
